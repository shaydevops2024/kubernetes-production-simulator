apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # 1. Namespace first
  - namespace.yaml

  # 2. Secrets & ConfigMaps
  - secrets/db-secrets.yaml
  - secrets/minio-secrets.yaml
  - configmaps/service-config.yaml

  # 3. Infrastructure (stateful services)
  - infrastructure/redis.yaml
  - infrastructure/postgres-chat.yaml
  - infrastructure/postgres-notifications.yaml
  - infrastructure/postgres-files.yaml
  - infrastructure/minio.yaml

  # 4. Application Deployments
  - deployments/chat-service.yaml
  - deployments/presence-service.yaml
  - deployments/notification-service.yaml
  - deployments/file-service.yaml
  - deployments/frontend.yaml

  # 5. Application Services
  - services/chat-service.yaml
  - services/presence-service.yaml
  - services/notification-service.yaml
  - services/file-service.yaml
  - services/frontend.yaml

  # 6. HPA
  - hpa/chat-service-hpa.yaml

  # 7. Ingress
  - ingress/ingress.yaml
